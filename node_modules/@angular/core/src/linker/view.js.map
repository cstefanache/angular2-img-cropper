{"version":3,"file":"view.js","sourceRoot":"","sources":["../../../../../modules/@angular/core/src/linker/view.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AnimationGroupPlayer} from '../animation/animation_group_player';\nimport {AnimationPlayer} from '../animation/animation_player';\nimport {queueAnimation} from '../animation/animation_queue';\nimport {AnimationTransitionEvent} from '../animation/animation_transition_event';\nimport {ViewAnimationMap} from '../animation/view_animation_map';\nimport {ChangeDetectorRef, ChangeDetectorStatus} from '../change_detection/change_detection';\nimport {Injector} from '../di/injector';\nimport {ListWrapper} from '../facade/collection';\nimport {isPresent} from '../facade/lang';\nimport {WtfScopeFn, wtfCreateScope, wtfLeave} from '../profile/profile';\nimport {RenderComponentType, RenderDebugInfo, Renderer} from '../render/api';\n\nimport {DebugContext, StaticNodeDebugInfo} from './debug_context';\nimport {AppElement} from './element';\nimport {ElementInjector} from './element_injector';\nimport {ExpressionChangedAfterItHasBeenCheckedError, ViewDestroyedError, ViewWrappedError} from './errors';\nimport {ViewRef_} from './view_ref';\nimport {ViewType} from './view_type';\nimport {ViewUtils, ensureSlotCount, flattenNestedViewRenderNodes} from './view_utils';\n\nvar _scope_check: WtfScopeFn = wtfCreateScope(`AppView#check(ascii id)`);\n\n/**\n * Cost of making objects: http://jsperf.com/instantiate-size-of-object\n *\n */\nexport abstract class AppView<T> {\n  ref: ViewRef_<T>;\n  rootNodesOrAppElements: any[];\n  allNodes: any[];\n  disposables: Function[];\n  subscriptions: any[];\n  contentChildren: AppView<any>[] = [];\n  viewChildren: AppView<any>[] = [];\n  viewContainerElement: AppElement = null;\n\n  numberOfChecks: number = 0;\n\n  projectableNodes: Array<any|any[]>;\n\n  renderer: Renderer;\n\n  private _hasExternalHostElement: boolean;\n\n  public animationPlayers = new ViewAnimationMap();\n\n  private _animationListeners = new Map<any, _AnimationOutputHandler[]>();\n\n  public context: T;\n\n  constructor(\n      public clazz: any, public componentType: RenderComponentType, public type: ViewType,\n      public viewUtils: ViewUtils, public parentInjector: Injector,\n      public declarationAppElement: AppElement, public cdMode: ChangeDetectorStatus) {\n    this.ref = new ViewRef_(this);\n    if (type === ViewType.COMPONENT || type === ViewType.HOST) {\n      this.renderer = viewUtils.renderComponent(componentType);\n    } else {\n      this.renderer = declarationAppElement.parentView.renderer;\n    }\n  }\n\n  get destroyed(): boolean { return this.cdMode === ChangeDetectorStatus.Destroyed; }\n\n  cancelActiveAnimation(element: any, animationName: string, removeAllAnimations: boolean = false) {\n    if (removeAllAnimations) {\n      this.animationPlayers.findAllPlayersByElement(element).forEach(player => player.destroy());\n    } else {\n      var player = this.animationPlayers.find(element, animationName);\n      if (isPresent(player)) {\n        player.destroy();\n      }\n    }\n  }\n\n  queueAnimation(\n      element: any, animationName: string, player: AnimationPlayer, totalTime: number,\n      fromState: string, toState: string): void {\n    queueAnimation(player);\n    var event = new AnimationTransitionEvent(\n        {'fromState': fromState, 'toState': toState, 'totalTime': totalTime});\n    this.animationPlayers.set(element, animationName, player);\n\n    player.onDone(() => {\n      // TODO: make this into a datastructure for done|start\n      this.triggerAnimationOutput(element, animationName, 'done', event);\n      this.animationPlayers.remove(element, animationName);\n    });\n\n    player.onStart(() => { this.triggerAnimationOutput(element, animationName, 'start', event); });\n  }\n\n  triggerAnimationOutput(\n      element: any, animationName: string, phase: string, event: AnimationTransitionEvent) {\n    var listeners = this._animationListeners.get(element);\n    if (isPresent(listeners) && listeners.length) {\n      for (let i = 0; i < listeners.length; i++) {\n        let listener = listeners[i];\n        // we check for both the name in addition to the phase in the event\n        // that there may be more than one @trigger on the same element\n        if (listener.eventName === animationName && listener.eventPhase === phase) {\n          listener.handler(event);\n          break;\n        }\n      }\n    }\n  }\n\n  registerAnimationOutput(\n      element: any, eventName: string, eventPhase: string, eventHandler: Function): void {\n    var animations = this._animationListeners.get(element);\n    if (!isPresent(animations)) {\n      this._animationListeners.set(element, animations = []);\n    }\n    animations.push(new _AnimationOutputHandler(eventName, eventPhase, eventHandler));\n  }\n\n  create(context: T, givenProjectableNodes: Array<any|any[]>, rootSelectorOrNode: string|any):\n      AppElement {\n    this.context = context;\n    var projectableNodes: any[];\n    switch (this.type) {\n      case ViewType.COMPONENT:\n        projectableNodes = ensureSlotCount(givenProjectableNodes, this.componentType.slotCount);\n        break;\n      case ViewType.EMBEDDED:\n        projectableNodes = this.declarationAppElement.parentView.projectableNodes;\n        break;\n      case ViewType.HOST:\n        // Note: Don't ensure the slot count for the projectableNodes as we store\n        // them only for the contained component view (which will later check the slot count...)\n        projectableNodes = givenProjectableNodes;\n        break;\n    }\n    this._hasExternalHostElement = isPresent(rootSelectorOrNode);\n    this.projectableNodes = projectableNodes;\n    return this.createInternal(rootSelectorOrNode);\n  }\n\n  /**\n   * Overwritten by implementations.\n   * Returns the AppElement for the host element for ViewType.HOST.\n   */\n  createInternal(rootSelectorOrNode: string|any): AppElement { return null; }\n\n  init(\n      rootNodesOrAppElements: any[], allNodes: any[], disposables: Function[],\n      subscriptions: any[]) {\n    this.rootNodesOrAppElements = rootNodesOrAppElements;\n    this.allNodes = allNodes;\n    this.disposables = disposables;\n    this.subscriptions = subscriptions;\n    if (this.type === ViewType.COMPONENT) {\n      // Note: the render nodes have been attached to their host element\n      // in the ViewFactory already.\n      this.declarationAppElement.parentView.viewChildren.push(this);\n      this.dirtyParentQueriesInternal();\n    }\n  }\n\n  selectOrCreateHostElement(\n      elementName: string, rootSelectorOrNode: string|any, debugInfo: RenderDebugInfo): any {\n    var hostElement: any;\n    if (isPresent(rootSelectorOrNode)) {\n      hostElement = this.renderer.selectRootElement(rootSelectorOrNode, debugInfo);\n    } else {\n      hostElement = this.renderer.createElement(null, elementName, debugInfo);\n    }\n    return hostElement;\n  }\n\n  injectorGet(token: any, nodeIndex: number, notFoundResult: any): any {\n    return this.injectorGetInternal(token, nodeIndex, notFoundResult);\n  }\n\n  /**\n   * Overwritten by implementations\n   */\n  injectorGetInternal(token: any, nodeIndex: number, notFoundResult: any): any {\n    return notFoundResult;\n  }\n\n  injector(nodeIndex: number): Injector {\n    if (isPresent(nodeIndex)) {\n      return new ElementInjector(this, nodeIndex);\n    } else {\n      return this.parentInjector;\n    }\n  }\n\n  destroy() {\n    if (this._hasExternalHostElement) {\n      this.renderer.detachView(this.flatRootNodes);\n    } else if (isPresent(this.viewContainerElement)) {\n      this.viewContainerElement.detachView(this.viewContainerElement.nestedViews.indexOf(this));\n    }\n    this._destroyRecurse();\n  }\n\n  private _destroyRecurse() {\n    if (this.cdMode === ChangeDetectorStatus.Destroyed) {\n      return;\n    }\n    var children = this.contentChildren;\n    for (var i = 0; i < children.length; i++) {\n      children[i]._destroyRecurse();\n    }\n    children = this.viewChildren;\n    for (var i = 0; i < children.length; i++) {\n      children[i]._destroyRecurse();\n    }\n    this.destroyLocal();\n\n    this.cdMode = ChangeDetectorStatus.Destroyed;\n  }\n\n  destroyLocal() {\n    var hostElement =\n        this.type === ViewType.COMPONENT ? this.declarationAppElement.nativeElement : null;\n    for (var i = 0; i < this.disposables.length; i++) {\n      this.disposables[i]();\n    }\n    for (var i = 0; i < this.subscriptions.length; i++) {\n      this.subscriptions[i].unsubscribe();\n    }\n    this.destroyInternal();\n    this.dirtyParentQueriesInternal();\n\n    if (this.animationPlayers.length == 0) {\n      this.renderer.destroyView(hostElement, this.allNodes);\n    } else {\n      var player = new AnimationGroupPlayer(this.animationPlayers.getAllPlayers());\n      player.onDone(() => { this.renderer.destroyView(hostElement, this.allNodes); });\n    }\n  }\n\n  /**\n   * Overwritten by implementations\n   */\n  destroyInternal(): void {}\n\n  /**\n   * Overwritten by implementations\n   */\n  detachInternal(): void {}\n\n  detach(): void {\n    this.detachInternal();\n    if (this.animationPlayers.length == 0) {\n      this.renderer.detachView(this.flatRootNodes);\n    } else {\n      var player = new AnimationGroupPlayer(this.animationPlayers.getAllPlayers());\n      player.onDone(() => { this.renderer.detachView(this.flatRootNodes); });\n    }\n  }\n\n  get changeDetectorRef(): ChangeDetectorRef { return this.ref; }\n\n  get parent(): AppView<any> {\n    return isPresent(this.declarationAppElement) ? this.declarationAppElement.parentView : null;\n  }\n\n  get flatRootNodes(): any[] { return flattenNestedViewRenderNodes(this.rootNodesOrAppElements); }\n\n  get lastRootNode(): any {\n    var lastNode = this.rootNodesOrAppElements.length > 0 ?\n        this.rootNodesOrAppElements[this.rootNodesOrAppElements.length - 1] :\n        null;\n    return _findLastRenderNode(lastNode);\n  }\n\n  /**\n   * Overwritten by implementations\n   */\n  dirtyParentQueriesInternal(): void {}\n\n  detectChanges(throwOnChange: boolean): void {\n    var s = _scope_check(this.clazz);\n    if (this.cdMode === ChangeDetectorStatus.Checked ||\n        this.cdMode === ChangeDetectorStatus.Errored)\n      return;\n    if (this.cdMode === ChangeDetectorStatus.Destroyed) {\n      this.throwDestroyedError('detectChanges');\n    }\n    this.detectChangesInternal(throwOnChange);\n    if (this.cdMode === ChangeDetectorStatus.CheckOnce) this.cdMode = ChangeDetectorStatus.Checked;\n\n    this.numberOfChecks++;\n    wtfLeave(s);\n  }\n\n  /**\n   * Overwritten by implementations\n   */\n  detectChangesInternal(throwOnChange: boolean): void {\n    this.detectContentChildrenChanges(throwOnChange);\n    this.detectViewChildrenChanges(throwOnChange);\n  }\n\n  detectContentChildrenChanges(throwOnChange: boolean) {\n    for (var i = 0; i < this.contentChildren.length; ++i) {\n      var child = this.contentChildren[i];\n      if (child.cdMode === ChangeDetectorStatus.Detached) continue;\n      child.detectChanges(throwOnChange);\n    }\n  }\n\n  detectViewChildrenChanges(throwOnChange: boolean) {\n    for (var i = 0; i < this.viewChildren.length; ++i) {\n      var child = this.viewChildren[i];\n      if (child.cdMode === ChangeDetectorStatus.Detached) continue;\n      child.detectChanges(throwOnChange);\n    }\n  }\n\n  markContentChildAsMoved(renderAppElement: AppElement): void { this.dirtyParentQueriesInternal(); }\n\n  addToContentChildren(renderAppElement: AppElement): void {\n    renderAppElement.parentView.contentChildren.push(this);\n    this.viewContainerElement = renderAppElement;\n    this.dirtyParentQueriesInternal();\n  }\n\n  removeFromContentChildren(renderAppElement: AppElement): void {\n    ListWrapper.remove(renderAppElement.parentView.contentChildren, this);\n    this.dirtyParentQueriesInternal();\n    this.viewContainerElement = null;\n  }\n\n  markAsCheckOnce(): void { this.cdMode = ChangeDetectorStatus.CheckOnce; }\n\n  markPathToRootAsCheckOnce(): void {\n    let c: AppView<any> = this;\n    while (isPresent(c) && c.cdMode !== ChangeDetectorStatus.Detached) {\n      if (c.cdMode === ChangeDetectorStatus.Checked) {\n        c.cdMode = ChangeDetectorStatus.CheckOnce;\n      }\n      let parentEl =\n          c.type === ViewType.COMPONENT ? c.declarationAppElement : c.viewContainerElement;\n      c = isPresent(parentEl) ? parentEl.parentView : null;\n    }\n  }\n\n  eventHandler<E, R>(cb: (event?: E) => R): (event?: E) => R { return cb; }\n\n  throwDestroyedError(details: string): void { throw new ViewDestroyedError(details); }\n}\n\nexport class DebugAppView<T> extends AppView<T> {\n  private _currentDebugContext: DebugContext = null;\n\n  constructor(\n      clazz: any, componentType: RenderComponentType, type: ViewType, viewUtils: ViewUtils,\n      parentInjector: Injector, declarationAppElement: AppElement, cdMode: ChangeDetectorStatus,\n      public staticNodeDebugInfos: StaticNodeDebugInfo[]) {\n    super(clazz, componentType, type, viewUtils, parentInjector, declarationAppElement, cdMode);\n  }\n\n  create(context: T, givenProjectableNodes: Array<any|any[]>, rootSelectorOrNode: string|any):\n      AppElement {\n    this._resetDebug();\n    try {\n      return super.create(context, givenProjectableNodes, rootSelectorOrNode);\n    } catch (e) {\n      this._rethrowWithContext(e);\n      throw e;\n    }\n  }\n\n  injectorGet(token: any, nodeIndex: number, notFoundResult: any): any {\n    this._resetDebug();\n    try {\n      return super.injectorGet(token, nodeIndex, notFoundResult);\n    } catch (e) {\n      this._rethrowWithContext(e);\n      throw e;\n    }\n  }\n\n  detach(): void {\n    this._resetDebug();\n    try {\n      super.detach();\n    } catch (e) {\n      this._rethrowWithContext(e);\n      throw e;\n    }\n  }\n\n  destroyLocal() {\n    this._resetDebug();\n    try {\n      super.destroyLocal();\n    } catch (e) {\n      this._rethrowWithContext(e);\n      throw e;\n    }\n  }\n\n  detectChanges(throwOnChange: boolean): void {\n    this._resetDebug();\n    try {\n      super.detectChanges(throwOnChange);\n    } catch (e) {\n      this._rethrowWithContext(e);\n      throw e;\n    }\n  }\n\n  private _resetDebug() { this._currentDebugContext = null; }\n\n  debug(nodeIndex: number, rowNum: number, colNum: number): DebugContext {\n    return this._currentDebugContext = new DebugContext(this, nodeIndex, rowNum, colNum);\n  }\n\n  private _rethrowWithContext(e: any) {\n    if (!(e instanceof ViewWrappedError)) {\n      if (!(e instanceof ExpressionChangedAfterItHasBeenCheckedError)) {\n        this.cdMode = ChangeDetectorStatus.Errored;\n      }\n      if (isPresent(this._currentDebugContext)) {\n        throw new ViewWrappedError(e, this._currentDebugContext);\n      }\n    }\n  }\n\n  eventHandler<E, R>(cb: (event?: E) => R): (event?: E) => R {\n    var superHandler = super.eventHandler(cb);\n    return (event?: any) => {\n      this._resetDebug();\n      try {\n        return superHandler(event);\n      } catch (e) {\n        this._rethrowWithContext(e);\n        throw e;\n      }\n    };\n  }\n}\n\nfunction _findLastRenderNode(node: any): any {\n  var lastNode: any;\n  if (node instanceof AppElement) {\n    var appEl = <AppElement>node;\n    lastNode = appEl.nativeElement;\n    if (isPresent(appEl.nestedViews)) {\n      // Note: Views might have no root nodes at all!\n      for (var i = appEl.nestedViews.length - 1; i >= 0; i--) {\n        var nestedView = appEl.nestedViews[i];\n        if (nestedView.rootNodesOrAppElements.length > 0) {\n          lastNode = _findLastRenderNode(\n              nestedView.rootNodesOrAppElements[nestedView.rootNodesOrAppElements.length - 1]);\n        }\n      }\n    }\n  } else {\n    lastNode = node;\n  }\n  return lastNode;\n}\n\nclass _AnimationOutputHandler {\n  constructor(public eventName: string, public eventPhase: string, public handler: Function) {}\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}